<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PINK_X : THE CORE BREACH</title>
    <style>
        :root {
            --pink: #ff007f;
            --dark-pink: #4d0026;
            --black: #0a0a0a;
            --glow: 0 0 10px #ff007f, 0 0 20px #ff007f;
        }

        body {
            background-color: var(--black);
            color: var(--pink);
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            text-transform: uppercase;
        }

        #terminal {
            width: 90%;
            max-width: 600px;
            background: rgba(10, 10, 10, 0.9);
            border: 2px solid var(--pink);
            padding: 20px;
            box-shadow: var(--glow);
            position: relative;
        }

        .header {
            border-bottom: 1px solid var(--pink);
            margin-bottom: 15px;
            padding-bottom: 5px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
        }

        .status-bar {
            font-size: 0.8rem;
            margin-bottom: 15px;
            color: #ffb3d9;
        }

        #display-area {
            min-height: 150px;
            margin-bottom: 20px;
        }

        .task-box {
            background: var(--dark-pink);
            padding: 15px;
            border-left: 5px solid var(--pink);
            font-size: 1.5rem;
            margin: 10px 0;
            text-align: center;
        }

        input {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--pink);
            color: var(--pink);
            font-family: 'Courier New', Courier, monospace;
            font-size: 1.5rem;
            width: 100%;
            outline: none;
            text-align: center;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        #timer-bar {
            height: 5px;
            background: var(--pink);
            width: 100%;
            transition: width 0.1s linear;
        }

        .hp-heart { color: var(--pink); }
        .lost { color: #333; }

        .glitch {
            animation: glitch 0.3s infinite;
        }

        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
    </style>
</head>
<body>

<div id="terminal">
    <div class="header">
        <span>> PINK_X_OS v1.0.4</span>
        <span id="level-display">LVL: 01</span>
    </div>
    
    <div class="status-bar" id="status-text">
        [ SYSTEM STATUS: READY TO INJECT ]
    </div>

    <div id="display-area">
        <div id="msg">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà Mainframe 01... ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏±‡∏ö Code ‡∏ä‡∏∏‡∏î‡πÅ‡∏£‡∏Å!</div>
        <div class="task-box" id="question-box">READY?</div>
        <div id="timer-container">
            <div id="timer-bar"></div>
        </div>
    </div>

    <input type="number" id="ans-input" placeholder="DECRYPT HERE..." autofocus>

    <div class="stats">
        <div>HP: <span id="hp-display">üíóüíóüíó</span></div>
        <div>COMBO: x<span id="combo-display">0</span></div>
    </div>
</div>

<script>
    let level = 1;
    let hp = 3;
    let combo = 0;
    let currentAns = 0;
    let timeLeft = 10;
    let timerInterval;
    let gameActive = false;

    const questionBox = document.getElementById('question-box');
    const ansInput = document.getElementById('ans-input');
    const hpDisplay = document.getElementById('hp-display');
    const comboDisplay = document.getElementById('combo-display');
    const levelDisplay = document.getElementById('level-display');
    const statusText = document.getElementById('status-text');
    const timerBar = document.getElementById('timer-bar');

    function generateTask() {
        let modes = ['overclock'];
        if (level >= 3) modes.push('root');
        if (level >= 5) modes.push('binary', 'modular');
        
        let mode = modes[Math.floor(Math.random() * modes.length)];
        let qText = "";
        
        // Adaptive Difficulty
        let maxNum = level * 5 + 10;
        let timeLimit = level <= 5 ? 10 : (level <= 10 ? 7 : 5);

        switch(mode) {
            case 'binary':
                let b1 = Math.floor(Math.random() * 10);
                let b2 = Math.floor(Math.random() * 5);
                qText = `[BINARY PULSE] ${b1.toString(2)} + ${b2.toString(2)} (BASE 10)`;
                currentAns = b1 + b2;
                break;
            case 'root':
                let r = Math.floor(Math.random() * 15) + 2;
                if(Math.random() > 0.5) {
                    qText = `[SQUARE ROOT VIRUS] ‚àö${r*r}`;
                    currentAns = r;
                } else {
                    qText = `[OVERCLOCK POWER] ${r}^2`;
                    currentAns = r*r;
                }
                break;
            case 'modular':
                let n1 = Math.floor(Math.random() * 100) + 20;
                let n2 = Math.floor(Math.random() * 9) + 2;
                qText = `[MODULAR BREACH] ${n1} mod ${n2}`;
                currentAns = n1 % n2;
                break;
            default:
                let a = Math.floor(Math.random() * maxNum);
                let b = Math.floor(Math.random() * maxNum);
                let c = Math.floor(Math.random() * 10);
                if (level < 6) {
                    qText = `[DECRYPT] ${a} + ${b}`;
                    currentAns = a + b;
                } else {
                    qText = `[OVERCLOCKED] (${a} + ${b}) - ${c}`;
                    currentAns = (a + b) - c;
                }
        }

        questionBox.innerText = qText;
        startTimer(timeLimit);
    }

    function startTimer(seconds) {
        clearInterval(timerInterval);
        timeLeft = seconds;
        let total = seconds;
        timerInterval = setInterval(() => {
            timeLeft -= 0.1;
            let percent = (timeLeft / total) * 100;
            timerBar.style.width = percent + "%";
            
            if (timeLeft <= 0) {
                fail();
            }
        }, 100);
    }

    function fail() {
        hp--;
        combo = 0;
        updateUI();
        statusText.innerText = "[ ALERT: FIREWALL DETECTED ERROR! ]";
        document.body.classList.add('glitch');
        setTimeout(() => document.body.classList.remove('glitch'), 300);
        
        if (hp <= 0) {
            endGame();
        } else {
            nextLevel();
        }
    }

    function updateUI() {
        hpDisplay.innerHTML = "üíó".repeat(hp) + "<span class='lost'>" + "üíî".repeat(3-hp) + "</span>";
        comboDisplay.innerText = combo;
        levelDisplay.innerText = `LVL: ${level < 10 ? '0' + level : level}`;
    }

    function nextLevel() {
        level++;
        ansInput.value = "";
        generateTask();
    }

    function endGame() {
        gameActive = false;
        clearInterval(timerInterval);
        questionBox.innerText = "CONNECTION TERMINATED";
        statusText.innerText = `[ FINAL LEVEL: ${level} | SCORE: ${level * 100 + combo * 10} ]`;
        ansInput.placeholder = "RELOAD TO RE-TRY";
        ansInput.disabled = true;
    }

    ansInput.addEventListener('keyup', (e) => {
        if (!gameActive) {
            gameActive = true;
            generateTask();
            return;
        }

        if (parseInt(ansInput.value) === currentAns) {
            combo++;
            statusText.innerText = "[ ACCESS GRANTED: BYPASSING... ]";
            nextLevel();
            updateUI();
        }
    });

    // Start
    updateUI();
</script>

</body>
</html>
